{{template "header.html" .}}

<h1>Nutritive value / 100 gms of raw ingredients</h1>

{{if .categories}}
<div class="dropdown">    
    <select id = "foodcategory">
         {{range .categories}}
            <option value={{.CategoryId}}>{{.Name}}</option>}
        {{end}}
    </select>   
 </div>
{{end}}

{{if .nutritions}}
<div class="container">
  <table class="table">
    <thead>
      <tr>
        <th>Name</th>
        <th>Energy(Kcals)</th>
        <th>Moisture(g)</th>
        <th>Proteins(g)</th>
        <th>Fats(g)</th>
        <th>Minerals(g)</th>
        <th>Fibre(g)</th>
        <th>Carbos(g)</th>
        <th>Calcium(mg)</th>
        <th>Phosphorous(mg)</th>
        <th>Iron(mg)</th>
      </tr>
    </thead>
    <tbody>
      {{range .nutritions}}
      <tr>
        <td>{{.Name}}</td>
        <td>{{.Energy}}</td>
        <td>{{.Moisture}}</td>
        <td>{{.Proteins}}</td>
        <td>{{.Fat}}</td>
        <td>{{.Minerals}}</td>
        <td>{{.Fibre}}</td>
        <td>{{.Carbos}}</td>
        <td>{{.Calcium}}</td>
        <td>{{.Phosphorous}}</td>
        <td>{{.Iron}}</td>
      </tr>
      {{end}}
     </tbody>
  </table>
</div>
{{end}}

<script type="text/javascript">
   $("#foodcategory").click(function(e){
      var selectedOption =  $("#foodcategory option:selected").val();
      console.log("selectedOption",selectedOption);
      $.get("/category/filter", {
         "id": selectedOption
      }, function(data){
          console.log("data is",data);          
      })
   })
</script>